:root{
  --bg:#000;
  --card:#0b0f1a;
  --card2:#111827;
  --line:#27304a;
  --txt:#f3f4f6;
  --muted:#a1a1aa;
  --orange:#f0a63a;
  --btn:#2b2d35;
  --btnLight:#c7c7cc;
}

*{box-sizing:border-box; -webkit-tap-highlight-color:transparent; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Tahoma,sans-serif;}
html,body{margin:0; padding:0; background:var(--bg); color:var(--txt); height:100%;}
body{overflow:hidden;}
#html-tag[dir="ltr"] body{direction:ltr;}

.app-header{
  margin:12px auto 8px;
  width:min(96%, 760px);
  background:linear-gradient(180deg,#03153a,#071124);
  border:1px solid #1f2a44;
  border-radius:20px;
  text-align:center;
  padding:10px 12px;
}
.app-title{font-size:1.1rem; font-weight:800; line-height:1.2;}
.app-subtitle{font-size:.9rem; color:var(--muted); margin-top:2px;}

main{
  height:calc(100vh - 150px);
  overflow-y:auto;
  padding:8px 12px 110px;
}
main::-webkit-scrollbar{width:8px;}
main::-webkit-scrollbar-thumb{background:#222; border-radius:999px;}

.tab-panel{display:none;}
.tab-panel.active{display:block;}

.calc-card, .page-card{
  width:min(96%, 760px);
  margin:0 auto;
  background:transparent;
}

.result-row{
  display:flex;
  gap:10px;
  justify-content:flex-start;
  align-items:center;
  flex-wrap:wrap;
  color:var(--orange);
  font-weight:800;
  font-size:1.05rem;
  margin:8px 0 8px;
  direction:ltr; /* numbers always English layout */
}
.result-row .sep{color:#8a6a2f;}

.volume-wrap{
  border:2px solid var(--orange);
  border-radius:20px;
  min-height:90px;
  display:flex;
  align-items:center;
  justify-content:flex-end;
  padding:8px 16px;
  background:#020611;
}
.display-value{
  font-size:4rem;
  line-height:1;
  color:var(--orange);
  user-select:none;
  direction:ltr;
}
.active-field{outline:2px solid rgba(240,166,58,.45); outline-offset:2px; border-radius:14px;}

.field-hint{
  text-align:right;
  color:var(--muted);
  margin:6px 4px 10px;
  font-size:.95rem;
}

/* على خط واحد */
.inputs-row{
  display:flex;
  gap:10px;
  align-items:flex-end;
  margin-bottom:10px;
}
.input-col{flex:1; min-width:0;}
.room-col{flex:2;}
.input-col label{
  display:block;
  text-align:center;
  color:var(--muted);
  font-size:.85rem;
  margin-bottom:4px;
}
.input-col input,
.input-col select{
  width:100%;
  height:54px;
  border-radius:16px;
  border:1px solid #2a3248;
  background:#12151e;
  color:#fff;
  text-align:center;
  font-size:1rem;
  outline:none;
  padding:0 10px;
}
.input-col select{
  text-align-last:center;
  direction:rtl;
}
#html-tag[dir="ltr"] .input-col select{direction:ltr;}
.input-col input{direction:ltr;}

.chips-row{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:12px;
}
.chip{
  background:#0c111c;
  border:1px solid #2a3248;
  color:#d6d6db;
  border-radius:999px;
  padding:6px 10px;
  font-size:.9rem;
  white-space:nowrap;
  direction:ltr;
}
#chip-standard{direction:rtl;}

.keypad-grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:10px;
}
.btn{
  border:none;
  border-radius:18px;
  min-height:72px;
  font-size:1.05rem;
  font-weight:700;
  cursor:pointer;
}
.btn:active{transform:scale(.98);}
.btn.dark{background:var(--btn); color:#f4f4f5;}
.btn.light{background:var(--btnLight); color:#000;}
.btn.orange{background:var(--orange); color:#fff;}
.btn.wide{grid-column:span 2;}

.history-box{
  margin-top:12px;
  border:1px solid #252f49;
  background:#0d111b;
  border-radius:18px;
  padding:10px;
}
.history-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:8px;
  font-weight:800;
}
.small-btn{
  border:1px solid #3a425a;
  background:#1b1f2a;
  color:#fff;
  border-radius:12px;
  padding:8px 12px;
  cursor:pointer;
}
.small-btn:active{transform:scale(.98);}

.history-item{
  border:1px solid #242d45;
  background:#121826;
  border-radius:14px;
  padding:10px;
  margin-bottom:8px;
}
.history-item:last-child{margin-bottom:0;}
.hist-top{
  display:flex; justify-content:space-between; gap:8px; align-items:flex-start;
}
.hist-room{font-weight:800; font-size:1rem;}
.hist-meta{color:var(--muted); font-size:.85rem;}
.hist-grid{
  margin-top:6px;
  display:grid;
  grid-template-columns:repeat(4,minmax(0,1fr));
  gap:6px;
}
.kv{
  background:#0c111c;
  border:1px solid #252f49;
  border-radius:10px;
  padding:6px;
  text-align:center;
}
.kv .k{font-size:.75rem; color:var(--muted);}
.kv .v{font-size:.95rem; direction:ltr;}

.page-card{
  border:1px solid #252f49;
  background:#0d111b;
  border-radius:18px;
  padding:14px;
}
.page-card h2{margin:0 0 10px; font-size:1.15rem;}
.page-card p{margin:0 0 12px; color:#d1d5db; line-height:1.6;}
.stack{display:flex; flex-direction:column; gap:10px;}
.full-btn{
  width:100%;
  height:48px;
  border:none;
  border-radius:14px;
  background:var(--orange);
  color:#fff;
  font-weight:800;
  cursor:pointer;
}
.full-btn:active{transform:scale(.99);}
.contact-list{display:grid; gap:8px; margin-top:10px;}
.made-ksa{
  margin-top:16px;
  text-align:center;
  color:#d1d5db;
  border-top:1px solid #252f49;
  padding-top:12px;
  font-weight:700;
}
.setting-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
  border:1px solid #252f49;
  border-radius:14px;
  background:#121826;
  padding:10px;
  margin-bottom:10px;
}
.setting-title{font-weight:800;}
.setting-sub{font-size:.85rem; color:var(--muted);}
.setting-item input{
  width:90px; height:40px; border-radius:10px; border:1px solid #2f3850;
  background:#0c111c; color:#fff; text-align:center; direction:ltr;
}

.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.75);
  z-index:2000;
  padding:12px;
}
.modal.show{display:block;}
.modal-card{
  width:min(96%,760px);
  margin:4vh auto 0;
  background:#0d111b;
  border:1px solid #252f49;
  border-radius:18px;
  padding:12px;
  max-height:86vh;
  overflow:auto;
}
.modal-head{
  display:flex; justify-content:space-between; align-items:center; gap:8px;
  margin-bottom:10px;
}
.modal-head h3{margin:0;}
.equip-item{
  border:1px solid #252f49;
  background:#121826;
  border-radius:14px;
  padding:10px;
  margin-bottom:8px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}
.eq-name{font-weight:700;}
.eq-sub{font-size:.85rem; color:var(--muted);}
.eq-controls{display:flex; align-items:center; gap:8px;}
.eq-controls button{
  width:34px; height:34px; border:none; border-radius:10px;
  background:#1f2535; color:#fff; font-size:1rem; cursor:pointer;
}
.eq-count{
  min-width:28px; text-align:center; font-weight:800; direction:ltr;
}

.bottom-nav{
  position:fixed;
  bottom:0; left:0; right:0;
  height:86px;
  background:#070b12;
  border-top:1px solid #20263a;
  display:flex;
  z-index:1500;
  padding-bottom:env(safe-area-inset-bottom);
}
.nav-item{
  flex:1;
  border:none;
  background:transparent;
  color:#a1a1aa;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:2px;
  font-size:.78rem;
  cursor:pointer;
}
.nav-item i{font-style:normal; font-size:1.25rem; line-height:1;}
.nav-item.active{color:var(--orange);}

@media (max-width: 560px){
  .app-header{width:100%; border-radius:14px; margin:8px 0 6px;}
  main{padding:6px 8px 112px; height:calc(100vh - 142px);}
  .calc-card,.page-card{width:100%;}
  .display-value{font-size:3.2rem;}
  .btn{min-height:64px; border-radius:16px;}
  .input-col label{font-size:.8rem;}
  .input-col input,.input-col select{height:50px; font-size:.95rem;}
  .hist-grid{grid-template-columns:repeat(2,minmax(0,1fr));}
}