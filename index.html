<!DOCTYPE html>
<html lang="ar" dir="rtl" id="html-tag">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#070b14" />
  <link rel="manifest" href="manifest.webmanifest" />
  <title>Air Calc Pro</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="app-header">
    <div class="app-header-inner">
      <div class="app-title">Air Calc Pro</div>
      <div class="app-subtitle">HVAC Engineering Suite</div>
    </div>
  </header>

  <main id="main-content">
    <!-- CALCULATOR TAB -->
    <section id="tab-calc" class="tab-panel active">
      <div class="calc-shell">

        <!-- Results -->
        <div class="result-strip">
          <span id="res-cfm">CFM 0</span>
          <span class="sep">|</span>
          <span id="res-tr">TR 0.00</span>
          <span class="sep">|</span>
          <span id="res-btu">BTU/h 0</span>
        </div>

        <div class="market-btu-line">
          <span data-ar="ุงูููุชุฑุญ:" data-en="Suggested:">ุงูููุชุฑุญ:</span>
          <span id="res-market-btu">BTU 0</span>
        </div>

        <!-- Display -->
        <div class="display-card">
          <div id="display" class="display-value active-field" onclick="focusField('display')">0</div>
        </div>
        <div class="display-hint" data-ar="ุญุฌู ุงูุบุฑูุฉ (mยณ)" data-en="Room Volume (mยณ)">ุญุฌู ุงูุบุฑูุฉ (mยณ)</div>

        <!-- Room meta -->
        <div class="meta-chip" id="room-meta">
          ASHRAE 170 โข ACH: 20 โข ุบุฑูุฉ ุนูููุงุช (OR)
        </div>

        <!-- Inputs row (same line) -->
        <div class="inputs-row">
          <div class="input-col room-col">
            <label data-ar="ุชุตููู ุงูุบุฑูุฉ" data-en="Room Type">ุชุตููู ุงูุบุฑูุฉ</label>
            <select id="room-select"></select>
          </div>

          <div class="input-col">
            <label data-ar="ุฃุดุฎุงุต" data-en="People">ุฃุดุฎุงุต</label>
            <input id="people-input" type="text" value="0" readonly onclick="focusField('people')" />
          </div>

          <div class="input-col">
            <label data-ar="ุฃุฌูุฒุฉ (W)" data-en="Equip (W)">ุฃุฌูุฒุฉ (W)</label>
            <input id="equip-input" type="text" value="0" readonly onclick="openEquipModal()" />
          </div>
        </div>

        <!-- Quick chips -->
        <div class="quick-chips">
          <span class="chip" id="chip-standard">ASHRAE 170</span>
          <span class="chip" id="chip-ach">ACH: 0</span>
          <span class="chip" id="chip-duct">Duct: 12" x 8"</span>
        </div>

        <!-- Keypad (previous square style / old layout feel) -->
        <div class="keypad-grid">
          <button class="key key-fn" onclick="calculateNow()">=</button>
          <button class="key key-fn" onclick="calculateNow(true)" data-ar="ุงุญุณุจ" data-en="CALC">ุงุญุณุจ</button>
          <button class="key key-light" onclick="deleteLast()">DEL</button>
          <button class="key key-light" onclick="clearAllInputs()">AC</button>

          <button class="key key-fn" onclick="focusField('people')" data-ar="ุฃุดุฎุงุต" data-en="People">ุฃุดุฎุงุต</button>
          <button class="key key-dark" onclick="press('9')">9</button>
          <button class="key key-dark" onclick="press('8')">8</button>
          <button class="key key-dark" onclick="press('7')">7</button>

          <button class="key key-fn" onclick="openEquipModal()" data-ar="ุฃุฌูุฒุฉ" data-en="Equip">ุฃุฌูุฒุฉ</button>
          <button class="key key-dark" onclick="press('6')">6</button>
          <button class="key key-dark" onclick="press('5')">5</button>
          <button class="key key-dark" onclick="press('4')">4</button>

          <button class="key key-dark" onclick="press('.')">.</button>
          <button class="key key-dark" onclick="press('3')">3</button>
          <button class="key key-dark" onclick="press('2')">2</button>
          <button class="key key-dark" onclick="press('1')">1</button>

          <button class="key key-dark key-zero" onclick="press('0')">0</button>
        </div>

        <!-- History -->
        <div class="history-card">
          <div class="history-head">
            <span data-ar="ุณุฌู ุงูุญุณุงุจุงุช" data-en="Calculation History">ุณุฌู ุงูุญุณุงุจุงุช</span>
            <div class="history-actions">
              <button class="small-btn" onclick="clearHistory()" data-ar="ูุณุญ" data-en="Clear">ูุณุญ</button>
            </div>
          </div>
          <div id="history-list" class="history-list"></div>
        </div>
      </div>
    </section>

    <!-- EXPORT TAB -->
    <section id="tab-export" class="tab-panel">
      <div class="page-card">
        <h2 data-ar="ุงูุชุตุฏูุฑ" data-en="Export">ุงูุชุตุฏูุฑ</h2>
        <p data-ar="ููููู ูุณุฎ ุณุฌู ุงูุญุณุงุจุงุช ูููู JSON ุฃู ูุณุฎู ููุต." data-en="You can export your calculation history as JSON or copy it as text.">
          ููููู ูุณุฎ ุณุฌู ุงูุญุณุงุจุงุช ูููู JSON ุฃู ูุณุฎู ููุต.
        </p>
        <div class="stack-btns">
          <button class="wide-btn accent" onclick="exportHistoryJSON()" data-ar="ุชูุฒูู JSON" data-en="Download JSON">ุชูุฒูู JSON</button>
          <button class="wide-btn" onclick="copyHistoryText()" data-ar="ูุณุฎ ุงูุณุฌู ููุต" data-en="Copy History Text">ูุณุฎ ุงูุณุฌู ููุต</button>
        </div>
        <textarea id="export-preview" class="export-box" readonly></textarea>
      </div>
    </section>

    <!-- AI ASSISTANT TAB (placeholder local helper) -->
    <section id="tab-assistant" class="tab-panel">
      <div class="page-card">
        <h2 data-ar="ุงููุณุงุนุฏ" data-en="Assistant">ุงููุณุงุนุฏ</h2>
        <p data-ar="ูุณุงุนุฏ ุณุฑูุน ุฏุงุฎู ุงูุชุทุจูู ูุนุทูู ููุงุญุธุงุช ููุฏุณูุฉ ูุจุณุทุฉ ุจูุงุกู ุนูู ุขุฎุฑ ูุชูุฌุฉ." data-en="A quick in-app helper that provides simple engineering hints based on your latest result.">
          ูุณุงุนุฏ ุณุฑูุน ุฏุงุฎู ุงูุชุทุจูู ูุนุทูู ููุงุญุธุงุช ููุฏุณูุฉ ูุจุณุทุฉ ุจูุงุกู ุนูู ุขุฎุฑ ูุชูุฌุฉ.
        </p>
        <button class="wide-btn accent" onclick="generateAssistantTip()" data-ar="ุงุนุทูู ููุงุญุธุฉ" data-en="Give me a tip">ุงุนุทูู ููุงุญุธุฉ</button>
        <div id="assistant-output" class="assistant-box">...</div>
      </div>
    </section>

    <!-- CONTACT TAB -->
    <section id="tab-contact" class="tab-panel">
      <div class="page-card">
        <h2 data-ar="ุชูุงุตู ูุนูุง" data-en="Contact Us">ุชูุงุตู ูุนูุง</h2>
        <p data-ar="Air Calc Pro ุฃุฏุงุฉ ููุฏุณูุฉ ุนูููุฉ ูุญุณุงุจ ูุชุทูุจุงุช ุงูุชูููุฉ ูุงูุชุจุฑูุฏ ุจุณุฑุนุฉุ ูุน ูุตู ูุงุถุญ ุจูู ุบุฑู ุงููุณุชุดููุงุช (ASHRAE 170) ูุงูุบุฑู ุงูุชุฌุงุฑูุฉ ูุงูุณูููุฉุ ูุฅุธูุงุฑ CFM ูTR ูBTU ูููุงุณ ุฏูุช ููุชุฑุญ ูุณุฌู ุญุณุงุจุงุช ูููุฏ ูููุฑุงุฌุนุฉ." data-en="Air Calc Pro is a practical engineering tool for fast ventilation and cooling calculations, with clear separation between hospital rooms (ASHRAE 170) and commercial/residential spaces, plus CFM, TR, BTU, suggested duct size, and a helpful calculation history.">
          Air Calc Pro ุฃุฏุงุฉ ููุฏุณูุฉ ุนูููุฉ ูุญุณุงุจ ูุชุทูุจุงุช ุงูุชูููุฉ ูุงูุชุจุฑูุฏ ุจุณุฑุนุฉุ ูุน ูุตู ูุงุถุญ ุจูู ุบุฑู ุงููุณุชุดููุงุช (ASHRAE 170) ูุงูุบุฑู ุงูุชุฌุงุฑูุฉ ูุงูุณูููุฉุ ูุฅุธูุงุฑ CFM ูTR ูBTU ูููุงุณ ุฏูุช ููุชุฑุญ ูุณุฌู ุญุณุงุจุงุช ูููุฏ ูููุฑุงุฌุนุฉ.
        </p>

        <div class="contact-lines">
          <div><strong>Yousef Alhammam</strong></div>
          <div>0560282701</div>
          <div>Yousef.alhammam@live.com</div>
        </div>

        <div class="saudi-made">ุตูุน ูู ุงูุณุนูุฏูุฉ ๐ธ๐ฆ</div>
      </div>
    </section>

    <!-- SETTINGS TAB -->
    <section id="tab-settings" class="tab-panel">
      <div class="page-card">
        <h2 data-ar="ุงูุฅุนุฏุงุฏุงุช" data-en="Settings">ุงูุฅุนุฏุงุฏุงุช</h2>

        <div class="setting-row">
          <div>
            <div class="setting-title" data-ar="ุงููุบุฉ" data-en="Language">ุงููุบุฉ</div>
            <div class="setting-sub" data-ar="ุชุบููุฑ ูุบุฉ ุงููุงุฌูุฉ ููุท (ุงูุฃุฑูุงู ุชุธู ุฅูุฌููุฒูุฉ)" data-en="Change UI language only (numbers stay English)">
              ุชุบููุฑ ูุบุฉ ุงููุงุฌูุฉ ููุท (ุงูุฃุฑูุงู ุชุธู ุฅูุฌููุฒูุฉ)
            </div>
          </div>
          <button class="small-btn accent" onclick="toggleLanguage()" id="lang-btn">English</button>
        </div>

        <div class="setting-row">
          <div>
            <div class="setting-title" data-ar="ุงูุชุฎุฒูู ุงููุญูู" data-en="Local Storage">ุงูุชุฎุฒูู ุงููุญูู</div>
            <div class="setting-sub" data-ar="ุญูุธ ุชููุงุฆู ูุณุฌู ุงูุญุณุงุจุงุช ูุงูุฅุนุฏุงุฏุงุช" data-en="Auto-save history and settings">
              ุญูุธ ุชููุงุฆู ูุณุฌู ุงูุญุณุงุจุงุช ูุงูุฅุนุฏุงุฏุงุช
            </div>
          </div>
          <button class="small-btn" onclick="resetAppData()" data-ar="ุฅุนุงุฏุฉ ุถุจุท" data-en="Reset">ุฅุนุงุฏุฉ ุถุจุท</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Equipment Modal -->
  <div id="equip-modal" class="modal">
    <div class="modal-content">
      <div class="modal-head">
        <h3 data-ar="ุงูุฃุฌูุฒุฉ" data-en="Equipment">ุงูุฃุฌูุฒุฉ</h3>
        <button class="small-btn" onclick="closeEquipModal()" data-ar="ุชู" data-en="Done">ุชู</button>
      </div>
      <div id="equip-list" class="equip-list"></div>
    </div>
  </div>

  <!-- Bottom Nav -->
  <nav class="bottom-nav">
    <button class="nav-item active" data-tab="tab-calc" onclick="switchTab('tab-calc', this)">
      <span class="nav-ic">๐งฎ</span>
      <span data-ar="ุงูุญุงุณุจุฉ" data-en="Calculator">ุงูุญุงุณุจุฉ</span>
    </button>
    <button class="nav-item" data-tab="tab-export" onclick="switchTab('tab-export', this)">
      <span class="nav-ic">๐ค</span>
      <span data-ar="ุงูุชุตุฏูุฑ" data-en="Export">ุงูุชุตุฏูุฑ</span>
    </button>
    <button class="nav-item" data-tab="tab-assistant" onclick="switchTab('tab-assistant', this)">
      <span class="nav-ic">๐ค</span>
      <span data-ar="ุงููุณุงุนุฏ" data-en="Assistant">ุงููุณุงุนุฏ</span>
    </button>
    <button class="nav-item" data-tab="tab-contact" onclick="switchTab('tab-contact', this)">
      <span class="nav-ic">๐</span>
      <span data-ar="ุชูุงุตู" data-en="Contact">ุชูุงุตู</span>
    </button>
    <button class="nav-item" data-tab="tab-settings" onclick="switchTab('tab-settings', this)">
      <span class="nav-ic">โ๏ธ</span>
      <span data-ar="ุงูุฅุนุฏุงุฏุงุช" data-en="Settings">ุงูุฅุนุฏุงุฏุงุช</span>
    </button>
  </nav>

  <script src="app.js"></script>
</body>
</html>